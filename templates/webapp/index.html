{% load webapp_i18n %}
<!DOCTYPE html>
<html lang="{{ user_language }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{% trans "WEBAPP_MY_GIFTS" %}</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            color: #000000;
            padding: 0;
            margin: 0;
            position: relative;
        }

        /* –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ */
        .back-button {
            position: absolute;
            top: 20px;
            left: 16px;
            background: none;
            border: none;
            color: #3390ec;
            font-size: 16px;
            cursor: pointer;
            z-index: 10;
            padding: 8px;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –±–µ–ª—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .main-container {
            position: absolute;
            width: 375px;
            max-width: 100%;
            left: 50%;
            transform: translateX(-50%);
            top: 79px;
            background: #FFFFFF;
            box-shadow: 0px -2px 58px rgba(0, 0, 0, 0.25);
            border-radius: 19px;
            padding: 20px 16px;
            padding-bottom: 100px;
            min-height: calc(100vh - 79px);
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –±–∞–ª–ª–∞–º–∏ */
        .points-card {
            background: #f0f0f0;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .points-icon {
            width: 48px;
            height: 48px;
            background: #FFD700;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .points-info {
            flex: 1;
        }

        .points-label {
            font-size: 14px;
            color: #999999;
            margin-bottom: 4px;
        }

        .points-value {
            font-size: 24px;
            font-weight: bold;
            color: #3390ec;
        }

        .points-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }

        /* –ë–∞–Ω–Ω–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∞ */
        .banner-card {
            background: linear-gradient(135deg, #3390ec 0%, #1e6bb8 100%);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            color: white;
            position: relative;
            overflow: hidden;
            min-height: 120px;
        }

        .banner-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            z-index: 2;
        }

        .banner-text {
            flex: 1;
        }

        .banner-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .banner-date {
            font-size: 12px;
            opacity: 0.9;
        }

        .banner-image {
            width: 120px;
            height: 80px;
            object-fit: contain;
            flex-shrink: 0;
        }

        .banner-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 32px;
            height: 32px;
            background: rgba(255, 0, 0, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 3;
            color: white;
            font-size: 20px;
            font-weight: bold;
        }

        .banner-nav-left {
            left: 8px;
        }

        .banner-nav-right {
            right: 8px;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –ø–æ–¥–∞—Ä–∫–∞–º–∏ */
        .gifts-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .gifts-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .gifts-icon {
            width: 24px;
            height: 24px;
            color: #3390ec;
        }

        .gifts-title {
            font-size: 14px;
            font-weight: 500;
            color: #000000;
            line-height: 1.4;
        }

        /* –°–µ—Ç–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ 2x2 */
        .gifts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .gift-grid-item {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .gift-grid-item:active {
            transform: scale(0.98);
        }

        .gift-grid-image {
            width: 100%;
            height: 140px;
            object-fit: cover;
            background: #f5f5f5;
        }

        .gift-grid-footer {
            background: #3390ec;
            padding: 12px;
            color: white;
        }

        .gift-grid-points {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .gift-grid-name {
            font-size: 12px;
            opacity: 0.9;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ */
        .user-info-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-info-icon {
            width: 40px;
            height: 40px;
            background: #3390ec;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            flex-shrink: 0;
        }

        .user-info-text {
            flex: 1;
        }

        .user-info-name {
            font-size: 16px;
            font-weight: bold;
            color: #000000;
            margin-bottom: 4px;
        }

        .user-info-id {
            font-size: 12px;
            color: #999999;
        }

        /* –§—É—Ç–µ—Ä —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π */
        .footer-section {
            margin-top: 24px;
            padding-top: 16px;
            border-top: 1px solid #e0e0e0;
        }

        .footer-text {
            font-size: 12px;
            color: #666666;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .contact-admin-btn {
            width: 100%;
            padding: 14px;
            background: #3390ec;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .contact-admin-btn:active {
            opacity: 0.7;
        }

        .error {
            background: #ffebee;
            color: #c62828;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #999999;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 16px;
        }

        .modal-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .btn:active {
            opacity: 0.7;
        }

        .btn-success {
            background: #4caf50;
            color: white;
        }

        .btn-danger {
            background: #f44336;
            color: white;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #000000;
        }

        .comment-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-top: 8px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            min-height: 80px;
        }

        @media (max-width: 375px) {
            .main-container {
                width: 100%;
                left: 0;
                transform: none;
                border-radius: 19px 19px 0 0;
            }
        }
    </style>
</head>
<body>
    <button class="back-button" onclick="goBack()">{% trans "WEBAPP_BACK" %}</button>
    
    <div class="main-container">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –±–∞–ª–ª–∞–º–∏ -->
        <div class="points-card">
            <div class="points-icon">‚≠ê</div>
            <div class="points-info">
                <div class="points-label">{% trans "WEBAPP_YOUR_POINTS" %}</div>
                <div class="points-value" id="points">0</div>
            </div>
            <img src="" alt="" class="points-avatar" id="userAvatar" style="display: none;" onerror="this.style.display='none'">
        </div>

        <div id="errorContainer"></div>

        <!-- –ë–∞–Ω–Ω–µ—Ä -->
        <div class="banner-card" id="bannerCard" style="display: none;">
            <div class="banner-nav banner-nav-left" onclick="prevBanner()">‚Äπ</div>
            <div class="banner-content">
                <div class="banner-text">
                    <div class="banner-title" id="bannerTitle"></div>
                    <div class="banner-date" id="bannerDate"></div>
                </div>
                <img src="" alt="" class="banner-image" id="bannerImage" style="display: none;" onerror="this.style.display='none'">
            </div>
            <div class="banner-nav banner-nav-right" onclick="nextBanner()">‚Ä∫</div>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –ø–æ–¥–∞—Ä–∫–∞–º–∏ -->
        <div class="gifts-card">
            <div class="gifts-header">
                <svg class="gifts-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/>
                </svg>
                <div class="gifts-title">{% trans "WEBAPP_PARTNER_TEXT" %}</div>
            </div>
            <div class="gifts-grid" id="giftsContainer">
                <div class="loading">{% trans "WEBAPP_LOADING_GIFTS" %}</div>
            </div>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
        <div class="user-info-card" id="userInfoCard" style="display: none;">
            <div class="user-info-icon">üë§</div>
            <div class="user-info-text">
                <div class="user-info-name" id="userName"></div>
                <div class="user-info-id" id="userId"></div>
            </div>
        </div>

        <!-- –§—É—Ç–µ—Ä —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π -->
        <div class="footer-section">
            <div class="footer-text">{% trans "WEBAPP_INFO_TEXT" %}</div>
            <button class="contact-admin-btn" onclick="contactAdmin()">{% trans "WEBAPP_CONTACT_ADMIN" %}</button>
        </div>
    </div>

    <!-- Modal –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <div class="modal-title">{% trans "WEBAPP_CONFIRM_RECEIPT" %}</div>
            <p>{% trans "WEBAPP_DID_YOU_RECEIVE" %}</p>
            <textarea class="comment-input" id="commentInput" placeholder="{% trans 'WEBAPP_COMMENT_PLACEHOLDER' %}"></textarea>
            <div class="modal-actions">
                <button class="btn btn-success" onclick="confirmDelivery(true)">{% trans "WEBAPP_YES_RECEIVED" %}</button>
                <button class="btn btn-danger" onclick="confirmDelivery(false)">{% trans "WEBAPP_NO_NOT_RECEIVED" %}</button>
                <button class="btn btn-secondary" onclick="closeModal()">{% trans "WEBAPP_CANCEL" %}</button>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // –ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è JavaScript
        let translations = {
            'WEBAPP_LOADING': '{% trans "WEBAPP_LOADING" %}',
            'WEBAPP_NO_GIFTS': '{% trans "WEBAPP_NO_GIFTS" %}',
            'WEBAPP_POINTS': '{% trans "WEBAPP_POINTS" %}',
            'WEBAPP_CONFIRM_REQUEST': '{% trans "WEBAPP_CONFIRM_REQUEST" %}',
            'WEBAPP_REQUEST_SENT': '{% trans "WEBAPP_REQUEST_SENT" %}',
            'WEBAPP_ERROR_LOADING_USER': '{% trans "WEBAPP_ERROR_LOADING_USER" %}',
            'WEBAPP_ERROR_LOADING_GIFTS': '{% trans "WEBAPP_ERROR_LOADING_GIFTS" %}',
            'WEBAPP_ERROR_REQUESTING_GIFT': '{% trans "WEBAPP_ERROR_REQUESTING_GIFT" %}',
            'WEBAPP_ERROR_CONFIRMING': '{% trans "WEBAPP_ERROR_CONFIRMING" %}',
            'WEBAPP_THANKS_CONFIRMATION': '{% trans "WEBAPP_THANKS_CONFIRMATION" %}',
            'WEBAPP_COMMENT_SENT': '{% trans "WEBAPP_COMMENT_SENT" %}',
            'WEBAPP_COMMENT_REQUIRED': '{% trans "WEBAPP_COMMENT_REQUIRED" %}',
            'WEBAPP_STATUS_PENDING': '{% trans "WEBAPP_STATUS_PENDING" %}',
            'WEBAPP_STATUS_APPROVED': '{% trans "WEBAPP_STATUS_APPROVED" %}',
            'WEBAPP_STATUS_REJECTED': '{% trans "WEBAPP_STATUS_REJECTED" %}',
            'WEBAPP_STATUS_COMPLETED': '{% trans "WEBAPP_STATUS_COMPLETED" %}',
            'WEBAPP_DELIVERY_PENDING': '{% trans "WEBAPP_DELIVERY_PENDING" %}',
            'WEBAPP_DELIVERY_SENT': '{% trans "WEBAPP_DELIVERY_SENT" %}',
            'WEBAPP_DELIVERY_DELIVERED': '{% trans "WEBAPP_DELIVERY_DELIVERED" %}',
            'WEBAPP_DELIVERY_STATUS': '{% trans "WEBAPP_DELIVERY_STATUS" %}',
            'WEBAPP_REQUESTED': '{% trans "WEBAPP_REQUESTED" %}',
            'WEBAPP_YOUR_COMMENT': '{% trans "WEBAPP_YOUR_COMMENT" %}',
            'WEBAPP_CONFIRM_RECEIPT_BUTTON': '{% trans "WEBAPP_CONFIRM_RECEIPT_BUTTON" %}',
            'USER': '{% trans "USER" %}',
        };

        async function loadTranslations(language) {
            try {
                const url = `${API_BASE}/translations/?lang=${language}`;
                const response = await fetch(url);
                if (response.ok) {
                    const data = await response.json();
                    Object.keys(data).forEach(key => {
                        if (key.startsWith('WEBAPP_') || key === 'USER') {
                            translations[key] = data[key];
                        }
                    });
                    updatePageTexts();
                }
            } catch (error) {
                console.error('Error loading translations:', error);
            }
        }

        function t(key, params = {}) {
            let text = translations[key] || key;
            if (Object.keys(params).length > 0) {
                for (const [k, v] of Object.entries(params)) {
                    text = text.replace(`{${k}}`, v);
                }
            }
            return text;
        }

        let currentUser = null;
        let currentRedemptionId = null;
        const API_BASE = '/api/webapp';

        async function initApp() {
            try {
                const initData = tg.initDataUnsafe;
                let user = initData ? initData.user : null;
                
                if (!user && tg.initData) {
                    try {
                        const params = new URLSearchParams(tg.initData);
                        const userParam = params.get('user');
                        if (userParam) {
                            user = JSON.parse(decodeURIComponent(userParam));
                        }
                    } catch (e) {
                        console.error('Error parsing initData:', e);
                    }
                }
                
                const urlParams = new URLSearchParams(window.location.search);
                const testUserId = urlParams.get('telegram_id');
                if (testUserId && !user) {
                    user = { id: parseInt(testUserId) };
                }
                
                if (!user || !user.id) {
                    showError('Web App –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç –∏–∑ Telegram –±–æ—Ç–∞.');
                    return;
                }

                const userResponse = await fetch(`${API_BASE}/user/?telegram_id=${user.id}`);
                if (!userResponse.ok) {
                    throw new Error(t('WEBAPP_ERROR_LOADING_USER'));
                }
                currentUser = await userResponse.json();
                
                document.getElementById('points').textContent = currentUser.points.toLocaleString();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                const userInfoCard = document.getElementById('userInfoCard');
                if (currentUser.first_name || currentUser.telegram_id) {
                    userInfoCard.style.display = 'flex';
                    document.getElementById('userName').textContent = currentUser.first_name || t('USER');
                    document.getElementById('userId').textContent = `ID ${currentUser.telegram_id}`;
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–≤–∞—Ç–∞—Ä –µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
                if (user.photo_url) {
                    const avatar = document.getElementById('userAvatar');
                    avatar.src = user.photo_url;
                    avatar.style.display = 'block';
                }
                
                if (currentUser.language) {
                    await loadTranslations(currentUser.language);
                }
                
                await loadGifts();
            } catch (error) {
                console.error('Error initializing app:', error);
                showError(t('WEBAPP_ERROR_LOADING_USER'));
            }
        }

        async function loadGifts() {
            try {
                const response = await fetch(`${API_BASE}/gifts/`);
                if (!response.ok) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–¥–∞—Ä–∫–∏');
                
                const gifts = await response.json();
                const container = document.getElementById('giftsContainer');
                
                if (gifts.length === 0) {
                    container.innerHTML = `<div class="loading">${t('WEBAPP_NO_GIFTS')}</div>`;
                    return;
                }

                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ–¥–∞—Ä–∫–∏ –ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (–æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫ –±–æ–ª—å—à–µ–º—É)
                gifts.sort((a, b) => a.points_cost - b.points_cost);

                container.innerHTML = gifts.map(gift => {
                    const canAfford = currentUser.points >= gift.points_cost;
                    return `
                        <div class="gift-grid-item" onclick="${canAfford ? `requestGift(${gift.id})` : ''}" style="${!canAfford ? 'opacity: 0.6;' : ''}">
                            <img src="${gift.image}" alt="${gift.name}" class="gift-grid-image" onerror="this.style.display='none'; this.parentElement.querySelector('.gift-grid-footer').style.borderTop='1px solid #e0e0e0';">
                            <div class="gift-grid-footer">
                                <div class="gift-grid-points">${gift.points_cost.toLocaleString()} ${t('WEBAPP_POINTS')}</div>
                                <div class="gift-grid-name">${gift.name}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Error loading gifts:', error);
                document.getElementById('giftsContainer').innerHTML = 
                    `<div class="error">${t('WEBAPP_ERROR_LOADING_GIFTS')}</div>`;
            }
        }

        async function requestGift(giftId) {
            if (!currentUser) return;
            
            if (!confirm(t('WEBAPP_CONFIRM_REQUEST'))) {
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/request-gift/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        telegram_id: currentUser.telegram_id,
                        gift_id: giftId
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ø–æ–¥–∞—Ä–∫–∞');
                }

                tg.showAlert(t('WEBAPP_REQUEST_SENT'));
                await initApp();
            } catch (error) {
                console.error('Error requesting gift:', error);
                tg.showAlert(error.message);
            }
        }

        function goBack() {
            tg.close();
        }

        function contactAdmin() {
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º Telegram –±–æ—Ç–∞ –¥–ª—è —Å–≤—è–∑–∏ —Å –∞–¥–º–∏–Ω–æ–º
            const botUsername = '{{ TELEGRAM_BOT_USERNAME }}';
            if (botUsername) {
                tg.openTelegramLink(`https://t.me/${botUsername}`);
            } else {
                tg.showAlert('Bot username not configured');
            }
        }

        function prevBanner() {
            // TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ –±–∞–Ω–Ω–µ—Ä–∞–º
        }

        function nextBanner() {
            // TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ –±–∞–Ω–Ω–µ—Ä–∞–º
        }

        function updatePageTexts() {
            const giftsTitle = document.querySelector('.gifts-title');
            if (giftsTitle) {
                giftsTitle.textContent = t('WEBAPP_PARTNER_TEXT');
            }
            
            const pointsLabel = document.querySelector('.points-label');
            if (pointsLabel) {
                pointsLabel.textContent = t('WEBAPP_YOUR_POINTS');
            }
            
            const footerText = document.querySelector('.footer-text');
            if (footerText) {
                footerText.textContent = t('WEBAPP_INFO_TEXT');
            }
            
            const contactBtn = document.querySelector('.contact-admin-btn');
            if (contactBtn) {
                contactBtn.textContent = t('WEBAPP_CONTACT_ADMIN');
            }
        }

        function showError(message) {
            const container = document.getElementById('errorContainer');
            container.innerHTML = `<div class="error">${message}</div>`;
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }

        initApp();
    </script>
</body>
</html>
