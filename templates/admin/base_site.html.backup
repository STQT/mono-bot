{% extends "admin/base.html" %}
{% load static %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/custom_admin.css' %}">
{% endblock %}

{% block branding %}
<h1 id="site-name">
    <a href="{% url 'admin:index' %}">
        <span class="brand-icon">‚ö°</span>
        <span class="brand-text">{{ site_header|default:_('Django administration') }}</span>
    </a>
</h1>
{% endblock %}

{% block nav-global %}
<nav class="admin-nav" id="admin-nav">
    <div class="nav-container">
        <a href="{% url 'admin:index' %}" class="nav-item {% if request.resolver_match.url_name == 'index' %}active{% endif %}">
            <span class="nav-icon">üè†</span>
            <span class="nav-text">–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="{% url 'dashboard' %}" class="nav-item {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
            <span class="nav-icon">üìä</span>
            <span class="nav-text">–î–∞—à–±–æ—Ä–¥</span>
        </a>
        <a href="{% url 'admin:core_telegramuser_changelist' %}" class="nav-item {% if 'telegramuser' in request.path %}active{% endif %}">
            <span class="nav-icon">üë•</span>
            <span class="nav-text">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
        </a>
        <a href="{% url 'admin:core_qrcode_changelist' %}" class="nav-item {% if 'qrcode' in request.path and 'generate' not in request.path %}active{% endif %}">
            <span class="nav-icon">üì±</span>
            <span class="nav-text">QR-–∫–æ–¥—ã</span>
        </a>
        <a href="{% url 'admin:core_qrcode_generate' %}" class="nav-item {% if 'generate' in request.path %}active{% endif %}">
            <span class="nav-icon">‚ûï</span>
            <span class="nav-text">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR</span>
        </a>
        <a href="{% url 'admin:core_gift_changelist' %}" class="nav-item {% if 'gift' in request.path and 'redemption' not in request.path %}active{% endif %}">
            <span class="nav-icon">üéÅ</span>
            <span class="nav-text">–ü–æ–¥–∞—Ä–∫–∏</span>
        </a>
        <a href="{% url 'admin:core_giftredemption_changelist' %}" class="nav-item {% if 'redemption' in request.path %}active{% endif %}">
            <span class="nav-icon">üì¶</span>
            <span class="nav-text">–ó–∞–∫–∞–∑—ã</span>
        </a>
        <a href="{% url 'admin:core_broadcastmessage_changelist' %}" class="nav-item {% if 'broadcast' in request.path %}active{% endif %}">
            <span class="nav-icon">üì¢</span>
            <span class="nav-text">–†–∞—Å—Å—ã–ª–∫–∏</span>
        </a>
    </div>
</nav>
{% endblock %}

{% block footer %}
<div class="admin-footer">
    <div class="footer-content">
        <p>&copy; {% now "Y" %} Mona Admin Panel. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        <p class="footer-links">
            <a href="{% url 'admin:index' %}">–ì–ª–∞–≤–Ω–∞—è</a> |
            <a href="{% url 'dashboard' %}">–î–∞—à–±–æ—Ä–¥</a>
        </p>
    </div>
</div>
{% endblock %}

{% block extrahead %}
{{ block.super }}
<script>
    // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
    (function() {
        if (window.innerWidth <= 768) {
            const nav = document.getElementById('admin-nav');
            const header = document.getElementById('header');
            
            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é
            const menuButton = document.createElement('button');
            menuButton.innerHTML = '‚ò∞';
            menuButton.style.cssText = 'background: rgba(255,255,255,0.2); border: none; color: white; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-size: 20px; margin-right: 20px;';
            menuButton.addEventListener('click', function() {
                nav.classList.toggle('mobile-open');
            });
            
            if (header) {
                header.insertBefore(menuButton, header.firstChild);
            }
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.addEventListener('click', function(e) {
                if (!nav.contains(e.target) && !menuButton.contains(e.target)) {
                    nav.classList.remove('mobile-open');
                }
            });
        }
    })();
</script>
{% endblock %}
